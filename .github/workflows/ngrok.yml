name: Flask + Ngrok Preview

on:
  workflow_dispatch:  # Lance manuellement l'action

jobs:
  preview:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout du code
      uses: actions/checkout@v3

    - name: Installer Python
      uses: actions/setup-python@v4
      with:
        python-version: 3.11

    - name: Installer les dÃ©pendances
      run: |
        pip install -r requirements.txt

    - name: Lancer Flask avec ngrok
      run: |
        echo "from pyngrok import ngrok; import __init__ as appfile; ngrok.set_auth_token(''); url = ngrok.connect(5000); print('ðŸ”— Votre lien temporaire :', url); appfile.app.run(port=5000)" > launch.py
        python launch.py
